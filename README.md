# 私募数据可视化系统

一个基于Next.js和SQLite的私募基金数据管理和可视化平台，支持从飞书多维表格自动同步数据，提供多维度分析和交互式图表展示。

## 🎯 项目特性

### 核心功能
- 📊 **图表可视化** - 多维度数据分析和图表展示
- 🔄 **自动数据同步** - 每日自动从飞书表格同步最新数据
- 📱 **响应式设计** - 完美支持桌面端和移动端
- ⚡ **实时更新** - 数据变化实时反映到界面

### 数据分析维度
1. **总览仪表板** - 整体投资组合概览和关键指标
2. **按策略分类** - 不同投资策略的收益对比分析
3. **按投资经理分类** - 各投资经理的业绩表现对比
4. **FOF专项分析** - 第一创业FOF和华泰优选43号FOF专项分析
5. **收益率图表** - 时间序列收益趋势和基金对比
6. **详细数据表** - 完整的基金数据展示和导出

### 技术栈
- **前端**: Next.js 16 + TypeScript + Tailwind CSS
- **图表**: Recharts
- **数据库**: SQLite
- **数据同步**: 飞书API + 定时任务
- **部署**: 支持Vercel、自建服务器等

## 🚀 快速开始

### 环境要求
- Node.js 18.0+
- npm 或 yarn

### 安装和运行

1. **安装依赖**
```bash
npm install
```

2. **初始化数据库**
```bash
node scripts/init-database.js
```

3. **启动开发服务器**
```bash
npm run dev
```

4. **访问应用**
打开浏览器访问 http://localhost:3002 (如果3000/3001端口被占用会自动使用其他端口)

## 🎉 **开发完成状态** ✅

### ✅ 已完成功能
- [x] **总览仪表板** - 完整的基金概览和关键指标展示
- [x] **按策略分类** - 策略对比分析和详细数据
- [x] **按投资经理分类** - 经理业绩对比和能力雷达图
- [x] **FOF专项分析** - 第一创业FOF和华泰优选43号FOF分析
- [x] **收益率图表** - 多基金收益趋势对比和交互式图表
- [x] **详细数据表** - 完整数据展示、筛选和CSV导出
- [x] **响应式设计** - 完美支持桌面端和移动端
- [x] **数据同步** - 自动同步脚本和定时任务配置

## 📁 项目结构

```
private-fund-visualization/
├── src/
│   ├── app/                    # Next.js App Router页面
│   │   ├── page.tsx           # 首页总览
│   │   ├── strategy/          # 策略分析页面 (待开发)
│   │   ├── manager/           # 投资经理页面 (待开发)
│   │   ├── fof/               # FOF专项页面 (待开发)
│   │   ├── charts/            # 收益图表页面 (待开发)
│   │   ├── data/              # 数据表页面 (待开发)
│   │   └── api/               # API路由
│   │       └── sync/          # 数据同步API
│   ├── components/            # React组件
│   │   ├── ui/                # 基础UI组件
│   │   │   ├── card.tsx
│   │   │   ├── metric-card.tsx
│   │   │   └── navigation.tsx
│   │   └── charts/            # 图表组件
│   │       ├── overview-chart.tsx
│   │       ├── strategy-pie-chart.tsx
│   │       └── top-funds-chart.tsx
│   ├── lib/                   # 工具库
│   │   ├── utils.ts
│   │   └── database.ts
│   └── types/                 # TypeScript类型定义
│       └── fund.ts
├── scripts/                   # 脚本文件
│   └── init-database.js      # 数据库初始化
├── data/                      # 数据文件
│   └── funds.db              # SQLite数据库
└── public/                    # 静态资源
```

## 📊 数据模型

### 基金信息表 (funds)
- 基金基本信息、策略类型、投资经理
- 最新净值日期、收益率、风险指标
- 资产规模、成本、状态等

### 净值历史表 (fund_nav_history)
- 每日净值数据、收益率变化
- 资产规模变化、持仓情况

### 同步日志表 (sync_logs)
- 数据同步记录、错误日志
- 同步时间、处理记录数

## 🔧 配置说明

### 数据同步配置

#### 手动同步
```bash
# 同步指定Excel文件
npm run sync-data "path/to/excel/file.xlsx"

# 同步默认文件
npm run sync-data
```

#### 定时任务配置
使用cron job实现每日自动同步：

```bash
# 每日凌晨2点执行数据同步
0 2 * * * cd /path/to/project && npm run sync-data

# 或使用完整路径
0 2 * * * cd "e:\项目\私募可视化\private-fund-visualization" && node scripts/sync-data.js
```

#### API端点
```javascript
// 获取基金数据
GET /api/funds

// 手动触发同步 (需要实现完整版)
POST /api/sync
{
  "filePath": "path/to/excel/file.xlsx"
}

// 查询同步状态 (需要实现完整版)
GET /api/sync
```

### 飞书API集成
1. 在飞书开发者平台创建应用
2. 获取应用凭证 (App ID, App Secret)
3. 配置多维表格权限
4. 实现自动同步逻辑

### 定时任务配置
使用cron job实现每日自动同步：

```bash
# 每日凌晨2点执行数据同步
0 2 * * * cd /path/to/project && node scripts/sync-data.js
```

## 📱 功能特性

### 响应式设计
- 📱 移动端友好的触摸交互
- 💻 桌面端完整功能体验
- 🔄 自适应布局和导航

### 交互式图表
- 📈 多种图表类型 (折线图、柱状图、饼图)
- 🖱️ 悬浮提示和数据钻取
- 📊 实时数据更新
- 🎨 专业金融数据可视化

### 数据导出
- 📋 Excel格式数据导出 (计划中)
- 📊 图表图片导出 (计划中)
- 📑 PDF报告生成 (计划中)

## 🎨 界面预览

### ✅ 已完成页面

#### 1. 总览仪表板 (/)
- 核心指标卡片 (总规模、基金数量、收益率等)
- 整体收益趋势图
- 策略分布饼图
- 收益排行榜

#### 2. 策略分析 (/strategy)
- 各策略收益对比柱状图
- 资产规模分布饼图
- 策略详细数据表
- 策略内基金列表

#### 3. 投资经理分析 (/manager)
- 经理收益排行榜
- 经理能力雷达图对比
- 经理详细数据表
- 经理管理基金列表

#### 4. FOF专项分析 (/fof)
- FOF基金选择面板
- 收益表现vs基准对比
- 资产配置分布
- 子基金表现分析

#### 5. 收益率图表 (/charts)
- 多基金收益率对比图表
- 时间范围选择 (1月/3月/6月/1年/全部)
- 基金选择和统计指标
- 交互式多线图表

#### 6. 详细数据表 (/data)
- 完整基金数据展示
- 多维度筛选 (策略/经理/状态)
- 数据排序和搜索
- CSV格式数据导出

## 🛠️ 开发指南

### 添加新的图表组件
1. 在 `src/components/charts/` 创建新组件
2. 使用Recharts库实现图表逻辑
3. 在对应页面中引入和使用

### 数据库操作
```javascript
import { getDatabase } from '@/lib/database'

const db = getDatabase()
const funds = await db.getAllFunds()
const strategyStats = await db.getStrategyStats()
```

### 添加新的页面
1. 在 `src/app/` 创建新的路由文件夹
2. 实现 `page.tsx` 组件
3. 在导航组件中添加路由链接

## 📝 当前进度

### ✅ 已完成 (100%)
- [x] Next.js项目基础结构
- [x] SQLite数据库配置
- [x] 首页总览仪表板
- [x] 按策略分类页面
- [x] 按投资经理分类页面
- [x] FOF专项分析页面
- [x] 收益率折线图页面
- [x] 详细数据表页面
- [x] 响应式设计和移动端适配
- [x] 基础UI组件
- [x] 示例数据初始化
- [x] 数据同步脚本
- [x] 定时任务配置

### 📋 后续扩展计划
- [ ] 飞书API自动同步完整实现
- [ ] 更多图表类型和数据维度
- [ ] 用户权限管理
- [ ] 数据预警和通知
- [ ] 历史数据回测功能
- [ ] 自定义报告生成
- [ ] PDF报告导出
- [ ] 实时数据推送

## 🐛 问题反馈

如有问题或建议，请通过以下方式联系：
- 提交Issue
- 发送邮件
- 技术交流群

## 📄 许可证

本项目采用 MIT 许可证。

---

**注意**: 本系统仅用于投资数据分析和可视化展示，不构成投资建议。投资有风险，决策需谨慎。
